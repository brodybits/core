(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.composi={})})(this,function(a){"use strict";function b(a,b,c,d,e,f){return{type:a,props:b,children:c,element:d,key:e,flag:f}}function c(a,c){return b(a,v,w,c,null,s)}function d(a){let c=a;"string"==typeof c&&(c=document.querySelector(c));const d=b(c.nodeName.toLowerCase(),v,w.map.call(c.childNodes,e),c,null,r);return c.vnode=d,c}function e(a){return 3===a.nodeType?c(a.nodeValue,a):d(a)}function f(...a){function c(a,b=new WeakMap){if(Object(a)!==a)return a;if(b.has(a))return b.get(a);const d=a instanceof Date?new Date(a):a instanceof RegExp?new RegExp(a.source,a.flags):a.constructor?new a.constructor:Object.create(null);return b.set(a,d),Object.assign(d,...Object.keys(a).map(d=>({[d]:c(a[d],b)})))}return a.unshift({}),a.reduce((d,a)=>Object.assign(d,c(a)))}function g(a){return"number"==typeof a&&isNaN(a)?"NaN":/\[object (.*)]/.exec(toString.call(a))[1]}function h(a){return a.currentTarget.events[a.type](a)}function i(a){return null==a?null:a.key}function j(a,b,c){let d=b;const e={};let f,g;for(;d<=c;d++)null!=(f=(g=a[d]).key)&&(e[f]=g);return e}function k(a,b,c,d,e){let j=b,k=c;if(k!==d)if("style"===j&&"Object"===g(d))for(let b in f(k,d)){const c=null==d||null==d[b]?"":d[b];"-"===b[0]?a[j].setProperty(b,c):a[j][b]=c}else if("key"!==j)if("className"===j&&(j="class"),"o"===j[0]&&"n"===j[1])a.events||(a.events={}),j=j.slice(2).toLowerCase(),k||(k=a.events[j]),a.events[j]=d,null==d?a.removeEventListener(j,h):null==k&&a.addEventListener(j,h);else{const b=null==d||!1===d||"no"===d||"off"===d;j in a&&"list"!==j&&"type"!==j&&"draggable"!==j&&"spellcheck"!==j&&"translate"!==j&&!e?(a[j]=null==d?"":d,b&&a.removeAttribute(j)):"xlink-href"===j||"xlinkHref"===j?(a.setAttributeNS(t,"href",d),a.setAttribute("href",d)):b?a.removeAttribute(j):a.setAttribute(j,d)}}function l(a,b,c){let d,e=c;d=a.flag===s?document.createTextNode(a.type):(e=e||"svg"===a.type)?document.createElementNS(u,a.type):document.createElement(a.type);const f=a.props;f.onmount&&b.push(function(){f.onmount(d)});for(let f=0,g=a.children.length;f<g;f++)d.appendChild(l(a.children[f],b,e));for(let g in f)k(d,g,null,f[g],e);return a.element=d}function m(a){for(let b=0,c=a.children.length;b<c;b++)m(a.children[b]);return a.element}function n(a,b){function c(){if(a&&a.nodeType)try{a.removeChild(m(b))}catch(a){console.log(a)}}const d=b.props&&b.props.onunmount;null==d?c():d(c,b.element)}function o(a,b,c,d,e,g){let h=a;for(let i in f(b,c))("value"==i||"checked"==i?h[i]:b[i])!==c[i]&&k(h,i,b[i],c[i],e);const i=g?c.onmount:c.onupdate;null!=i&&d.push(function(){i(h,b,c)})}function p(a,b,c,d,e,f){let g=f,h=b;if(d!==c){if(null!=c&&c.flag===s&&d.flag===s)c.type!==d.type&&(h.nodeValue=d.type);else if(null==c||c.type!==d.type){const b=a.insertBefore(l(d,e,g),h);null!=c&&n(a,c),h=b}else{o(h,c.props,d.props,e,g=g||"svg"===d.type,c.flag===r);let a,b,f;const k=c.children;let m,q=0,s=k.length-1;const t=d.children;let u=0,v=t.length-1;for(;u<=v&&q<=s&&(f=i(k[q]),m=i(t[u]),null!=f&&f===m);)p(h,k[q].element,k[q],t[u],e,g),q++,u++;for(;u<=v&&q<=s&&(f=i(k[s]),m=i(t[v]),null!=f&&f===m);)p(h,k[s].element,k[s],t[v],e,g),s--,v--;if(q>s)for(;u<=v;)h.insertBefore(l(t[u++],e,g),(b=k[q])&&b.element);else if(u>v)for(;q<=s;)n(h,k[q++]);else{let d=j(k,q,s);const l={};for(;u<=v;){if(f=i(b=k[q]),m=i(t[u]),l[f]||null!=m&&m===i(k[q+1])){null==f&&n(h,b),q++;continue}null==m||c.flag===r?(null==f&&(p(h,b&&b.element,b,t[u],e,g),u++),q++):(f===m?(p(h,b.element,b,t[u],e,g),l[m]=!0,q++):null==(a=d[m])?p(h,b&&b.element,null,t[u],e,g):(p(h,h.insertBefore(a.element,b&&b.element),a,t[u],e,g),l[m]=!0),u++)}for(;q<=s;)null==i(b=k[q++])&&n(h,b);for(let a in d)null==l[a]&&n(h,d[a])}}return d.element=h,d}}function q(a,b,c){let d=b,e=c;"string"==typeof d&&(d=document.querySelector(d));let f=e&&e.vnode;const g=[];if(!f){if(Array.isArray(a))throw new x;const b=l(a,g);e=d.appendChild(b),a.element=b}else p(d,e,f,a,g);if(a!==f)for(;0<g.length;)g.pop()();return a.element.isMounted=!0,e.vnode=a,e}const r=0,s=3,t="http://www.w3.org/1999/xlink",u="http://www.w3.org/2000/svg",v={},w=[];class x{constructor(){this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}}}a.h=function(a,d,...e){const f=d||{};let g;const h=[],i=[];let j=e.length;const k=f.key;for(;0<j--;)h.push(e[j]);for(null!=f.children&&(0>=h.length&&h.push(f.children),delete f.children);0<h.length;)if(Array.isArray(g=h.pop()))for(j=g.length;0<j--;)h.push(g[j]);else if(!1===g||!0===g||null==g);else i.push("object"==typeof g?g:c(g));return delete f.key,"function"==typeof a?a(f,f.children=i):b(a,f,i,null,k,1)},a.render=function(a,b,c){return q(a,b,c)},a.unmount=function(a){function b(){d.remove()}let c=a.vnode,d=a;c.props.onunmount?c.props.onunmount(b,c.element):b()},a.hydrate=d,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=composi.js.map
